é€»è¾‘2ï¼šå¤§é˜³ååŒ… å½“å¤©å¤§é˜´
ï¼ˆBIG_GREEN_THEN_RED_SHORTï¼‰
è§¦å‘æ¡ä»¶ï¼š
å‰ä¸€æ—¥å¤§é˜³çº¿ååŒ…ï¼ˆæ”¶ç›˜ä»· > å¼€ç›˜ä»· Ã— 1.07ï¼‰
å½“æ—¥æ”¶ç›˜å½¢æˆå¤§é˜´çº¿ï¼ˆæ”¶ç›˜ä»· < å¼€ç›˜ä»·ï¼‰
åŠ¨ä½œï¼šå¼€ ç©ºå•

# ================= é€»è¾‘ =================
def candle_down(c): return c['close'] < c['open']
def big_green(c, ratio): return c['close'] > c['open'] * ratio

# ================= å›æµ‹å‡½æ•° =================
def backtest_symbol(df_s, ratio):
    trades = []
    n = len(df_s)
    for i in range(1, n-2):  # æœ€åä¸€å¤©ä¸èƒ½å¼€ä»“ï¼Œæ‰€ä»¥å‡2
        prev = df_s.iloc[i-1]      # å‰ä¸€å¤©
        curr = df_s.iloc[i]        # å½“å¤©
        next_candle = df_s.iloc[i+1] # ç¬¬äºŒå¤©ï¼ˆå¼€ä»“æ—¥ï¼‰

        # ä¸¥æ ¼é€»è¾‘ï¼šå‰ä¸€å¤©å¤§é˜³ + å½“å¤©æ”¶é˜´ + ç¬¬äºŒå¤©æ”¶é˜´
        if big_green(prev, ratio) and candle_down(curr) and candle_down(next_candle):
            entry_price = next_candle["open"]
            entry_date = next_candle["date"]
            tp_price = entry_price * (1 - TP)


2026å¹´1æœˆ1æ—¥å›æµ‹æƒ…å†µ
============================================================
ğŸ“Š é˜ˆå€¼ 1.07 é£é™©ç”»åƒ
è§¦å‘æ¬¡æ•°: 10464
ç›ˆåˆ©æ¬¡æ•°: 10462 | äºæŸæ¬¡æ•°: 2 | èƒœç‡: 99.98%
æœ€é•¿æŒä»“å¤©æ•°: 608 å¤©
æœ€å¤§æµ®äº: 4123.02 USDT
ç´¯è®¡å‡€æ”¶ç›Š: 83383.88 USDT

============================================================
ğŸ“Š é˜ˆå€¼ 1.08 é£é™©ç”»åƒ
è§¦å‘æ¬¡æ•°: 8565
ç›ˆåˆ©æ¬¡æ•°: 8563 | äºæŸæ¬¡æ•°: 2 | èƒœç‡: 99.98%
æœ€é•¿æŒä»“å¤©æ•°: 608 å¤©
æœ€å¤§æµ®äº: 4123.02 USDT
ç´¯è®¡å‡€æ”¶ç›Š: 68191.88 USDT
